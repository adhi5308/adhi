<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Wishlist</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Poppins','Roboto',sans-serif; background:#f5f5f5; margin:0; padding:20px; }
  h1 { color:green; text-align:center; }
  .wishlist-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:20px; margin-top:20px; }
  .card { background:white; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); overflow:hidden; transition:0.2s; }
  .card:hover { transform:translateY(-5px); box-shadow:0 6px 15px rgba(0,0,0,0.2); }
  .card img { width:100%; height:200px; object-fit:cover; }
  .card-body { padding:15px; text-align:center; }
  .card-body h3 { margin:5px 0; }
  .btn { padding:8px 15px; border:none; border-radius:5px; cursor:pointer; margin:5px; }
  .remove { background:red; color:white; }
  .addcart { background:green; color:white; }
</style>
</head>
<body>
<h1>My Wishlist</h1>
<div id="wishlistGrid" class="wishlist-grid"></div>

<script>
let user = localStorage.getItem("loggedInUser");
if(!user){ alert("Please login first"); window.location="index.html"; }
let wishlistKey = "wishlist_"+user;
let wishlist = JSON.parse(localStorage.getItem(wishlistKey))||[];
let products = JSON.parse(localStorage.getItem("products"))||[];

function renderWishlist(){
  let grid=document.getElementById("wishlistGrid");
  grid.innerHTML="";
  if(wishlist.length===0){ grid.innerHTML="<p style='text-align:center;'>No items in wishlist.</p>"; return; }
  wishlist.forEach(name=>{
    let p=products.find(x=>x.name===name);
    if(p){
      grid.innerHTML+=`
        <div class="card">
          <img src="${p.image}" alt="${p.name}">
          <div class="card-body">
            <h3>${p.name}</h3>
            <p>${p.description}</p>
            <p>â‚¹${p.price}</p>
            <button class="btn addcart" onclick="addToCart('${p.name}','${p.description}',${p.price},'${p.image}')">Add to Cart</button>
            <button class="btn remove" onclick="removeFromWishlist('${p.name}')">Remove</button>
          </div>
        </div>`;
    }
  });
}
function addToCart(name,desc,price,img){
  let cart=JSON.parse(localStorage.getItem("cart"))||[];
  let idx=cart.findIndex(i=>i.name===name);
  if(idx!==-1){ cart[idx].qty++; } else { cart.push({name,description:desc,price,image:img,qty:1}); }
  localStorage.setItem("cart",JSON.stringify(cart));
  alert("Added to cart!");
}
function removeFromWishlist(name){
  wishlist=wishlist.filter(n=>n!==name);
  localStorage.setItem(wishlistKey,JSON.stringify(wishlist));
  renderWishlist();
}
renderWishlist();
</script>
</body>
</html>
